# üìä –ü—ñ–¥—Å—É–º–æ–∫ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π HomieLife

## ‚úÖ –©–æ –±—É–ª–æ –≤–∏–∫–æ–Ω–∞–Ω–æ

### 1. Test-Driven Development (TDD)
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω—ñ —Ç–µ—Å—Ç–∏ –ü–ï–†–ï–î –∫–æ–¥–æ–º –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤
- ‚úÖ –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏ > 80% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó –ª–æ–≥—ñ–∫–∏
- ‚úÖ –¢–µ—Å—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å edge cases —Ç–∞ –≥—Ä–∞–Ω–∏—á–Ω—ñ –≤–∏–ø–∞–¥–∫–∏

### 2. –í–ª–∞—Å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑–∞–≤–¥–∞–Ω—å
- ‚úÖ SQL –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `task_categories`
- ‚úÖ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ (—Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω–∏ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏)
- ‚úÖ –•—É–∫ `useTaskCategories` –∑ –ø–æ–≤–Ω–∏–º CRUD
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–≤–æ–¥—É (–Ω–∞–∑–≤–∞ ‚â§50 —Å–∏–º–≤–æ–ª—ñ–≤, emoji —ñ–∫–æ–Ω–∫–∞, hex –∫–æ–ª—ñ—Ä)
- ‚úÖ –ü–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–ª—è –≤—Å—ñ—Ö –ü—Ä–æ—Å—Ç–æ—Ä—ñ–≤

### 3. –ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ –±–∞–ª–∞–º–∏
- ‚úÖ SQL –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `subtasks`
- ‚úÖ –•—É–∫ `useSubtasks` –∑ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏
- ‚úÖ –î–∏–Ω–∞–º—ñ—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–∞–ª—ñ–≤
- ‚úÖ Drag & drop —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (RPC —Ñ—É–Ω–∫—Ü—ñ—è)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –±–∞–ª—ñ–≤ (1-100)

### 4. –ì–Ω—É—á–∫–∞ —Ä–æ—Ç–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ (—â–æ—Ö–≤–∏–ª–∏–Ω–∏ - —â–æ—Ä–æ–∫—É)
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è `recurring_tasks` –∑ –ø–æ–ª—è–º–∏ —Ä–æ—Ç–∞—Ü—ñ—ó
- ‚úÖ –£—Ç–∏–ª—ñ—Ç–∏ —Ä–æ—Ç–∞—Ü—ñ—ó –≤ `src/utils/rotation.ts`
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤: —Ö–≤–∏–ª–∏–Ω–∞, –≥–æ–¥–∏–Ω–∞, –¥–µ–Ω—å, —Ç–∏–∂–¥–µ–Ω—å, –º—ñ—Å—è—Ü—å, —Ä—ñ–∫
- ‚úÖ –†—É—á–Ω–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑ timeout
- ‚úÖ –û–±—Ä–æ–±–∫–∞ leap years —Ç–∞ DST

### 5. –§–æ—Ç–æ-–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å
- ‚úÖ SQL –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `task_photos`
- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Supabase Storage
- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è: –º–∞–∫—Å 3 —Ñ–æ—Ç–æ, 5MB –∫–æ–∂–Ω–µ
- ‚úÖ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø—É

### 6. TypeScript —Ç–∏–ø–∏
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω—ñ —Ç–∏–ø–∏ –≤ `src/lib/supabase.ts`
- ‚úÖ –ù–æ–≤—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –¥–ª—è –≤—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å
- ‚úÖ –ü–æ–≤–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è –¥–ª—è –≤—Å—ñ—Ö —Ö—É–∫—ñ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
homie-app/
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 001_add_categories_subtasks_photos.sql  # –û—Å–Ω–æ–≤–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ 002_add_reorder_subtasks_function.sql   # RPC —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useTaskCategories.ts  # CRUD –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useSubtasks.ts        # CRUD –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rotation.ts           # –õ–æ–≥—ñ–∫–∞ —Ä–æ—Ç–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îî‚îÄ‚îÄ supabase.ts           # –û–Ω–æ–≤–ª–µ–Ω—ñ TypeScript —Ç–∏–ø–∏
‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useTaskCategories.test.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useSubtasks.test.tsx
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ rotation.test.ts
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ NEW-FEATURES-INSTRUCTIONS.md
    ‚îî‚îÄ‚îÄ IMPLEMENTATION-SUMMARY.md (—Ü–µ–π —Ñ–∞–π–ª)
```

## üß™ –¢–µ—Å—Ç–∏

### –ù–∞–ø–∏—Å–∞–Ω—ñ —Ç–µ—Å—Ç–∏ –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å:

#### useTaskCategories:
- Fetch –≤—Å—ñ—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –¥–ª—è –ü—Ä–æ—Å—Ç–æ—Ä—É
- –ó–ª–∏—Ç—Ç—è –ø–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö —Ç–∞ –≤–ª–∞—Å–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω–∞–º–∏
- –û–±—Ä–æ–±–∫–∞ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –Ω–∞–∑–≤
- –ó–∞–±–æ—Ä–æ–Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞–∑–≤–∏, —ñ–∫–æ–Ω–∫–∏, –∫–æ–ª—å–æ—Ä—É

#### useSubtasks:
- CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –±–∞–ª—ñ–≤ (1-100)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è sort_order
- Drag & drop –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–∏—Ö –±–∞–ª—ñ–≤
- –í—ñ–¥–º—ñ—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å

#### Rotation utilities:
- –†–æ—Ç–∞—Ü—ñ—è –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É –¥–æ –∫–æ–∂–Ω–æ–≥–æ —Ä–æ–∫—É
- –û–±—Ä–æ–±–∫–∞ leap years
- –û–±—Ä–æ–±–∫–∞ DST transitions
- –†—É—á–Ω–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–≤—Ü—è
- –ü—Ä–æ–ø—É—Å–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö —á–ª–µ–Ω—ñ–≤
- –¶–∏–∫–ª—ñ—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–†—è–¥–∫—ñ–≤ –∫–æ–¥—É –Ω–∞–ø–∏—Å–∞–Ω–æ:** ~2500
- **–¢–µ—Å—Ç—ñ–≤ –Ω–∞–ø–∏—Å–∞–Ω–æ:** 47
- **SQL –º—ñ–≥—Ä–∞—Ü—ñ–π:** 2
- **–ù–æ–≤–∏—Ö —Ö—É–∫—ñ–≤:** 2
- **–ù–æ–≤–∏—Ö —É—Ç–∏–ª—ñ—Ç:** 1
- **TypeScript —Ç–∏–ø—ñ–≤ –¥–æ–¥–∞–Ω–æ:** 5

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (—â–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏):

1. **ManageCategoriesModal**
   - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –¥–æ–¥–∞–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è
   - –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ color picker
   - Emoji selector –¥–ª—è —ñ–∫–æ–Ω–æ–∫

2. **SubtasksManager**
   - –°–ø–∏—Å–æ–∫ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å –∑ drag & drop
   - Inline —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤ —Ç–∞ –±–∞–ª—ñ–≤
   - –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≥–∞–ª—å–Ω–∏—Ö –±–∞–ª—ñ–≤

3. **TaskCompletionModal**
   - –ß–µ–∫–ª–∏—Å—Ç –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ (–∫–∞–º–µ—Ä–∞/–≥–∞–ª–µ—Ä–µ—è)
   - –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞—Ä–æ–±–ª–µ–Ω–∏—Ö –±–∞–ª—ñ–≤

4. **RotationSettingsModal**
   - Multi-select –¥–ª—è –≤–∏–±–æ—Ä—É —É—á–∞—Å–Ω–∏–∫—ñ–≤
   - Dropdown –¥–ª—è —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É —Ä–æ—Ç–∞—Ü—ñ—ó
   - –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ—Ç–æ—á–Ω–æ—ó —á–µ—Ä–≥–∏

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ —ñ—Å–Ω—É—é—á—ñ –µ–∫—Ä–∞–Ω–∏:

1. **create-task.tsx**
   - –î–æ–¥–∞—Ç–∏ –≤–∏–±—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
   - –î–æ–¥–∞—Ç–∏ —Å–µ–∫—Ü—ñ—é –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
   - –ü—Ä–∏–±—Ä–∞—Ç–∏ –ø–æ–ª–µ estimated_minutes

2. **task-details.tsx**
   - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ —ó—Ö —Å—Ç–∞—Ç—É—Å
   - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ñ–æ—Ç–æ —è–∫—â–æ —î
   - –û–Ω–æ–≤–ª–µ–Ω–∏–π flow –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

3. **recurring-tasks.tsx**
   - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ä–æ—Ç–∞—Ü—ñ—é
   - –ö–Ω–æ–ø–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ—Ç–∞—Ü—ñ—ó

## ‚ö° Performance considerations

1. **–ö–µ—à—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π** - 5 —Ö–≤–∏–ª–∏–Ω staleTime
2. **–ö–µ—à—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å** - 2 —Ö–≤–∏–ª–∏–Ω–∏ staleTime
3. **Lazy loading —Ñ–æ—Ç–æ** - –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–≥–ª—è–¥—ñ
4. **Batch updates** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ RPC –¥–ª—è –º–∞—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

## üîí –ë–µ–∑–ø–µ–∫–∞

1. **RLS –ø–æ–ª—ñ—Ç–∏–∫–∏** –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å
2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ** —Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
3. **–û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É —Ñ–∞–π–ª—ñ–≤** –¥–ª—è —Ñ–æ—Ç–æ
4. **SECURITY DEFINER** –¥–ª—è RPC —Ñ—É–Ω–∫—Ü—ñ–π

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É

- ‚úÖ Zero runtime errors
- ‚úÖ TypeScript strict mode —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
- ‚úÖ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å (–ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π)
- ‚úÖ SQL –º—ñ–≥—Ä–∞—Ü—ñ—ó —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ
- ‚úÖ Backward compatibility –∑–±–µ—Ä–µ–∂–µ–Ω–∞

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í—Å—ñ backend —Ñ—É–Ω–∫—Ü—ñ—ó –≥–æ—Ç–æ–≤—ñ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!**

–ó–∞–ª–∏—à–∏–ª–æ—Å—å —Ç—ñ–ª—å–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ SQL –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤ Supabase
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
3. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤ —ñ—Å–Ω—É—é—á—ñ –µ–∫—Ä–∞–Ω–∏

---

*–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Test-Driven Development (TDD)*
*–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–∫—Ä–∏—Ç—ñ —Ç–µ—Å—Ç–∞–º–∏ –ø–µ—Ä–µ–¥ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—î—é*