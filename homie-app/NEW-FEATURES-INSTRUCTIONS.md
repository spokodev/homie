# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π HomieLife

## üöÄ –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —è–∫—ñ –±—É–ª–∏ –¥–æ–¥–∞–Ω—ñ

### 1. –í–ª–∞—Å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑–∞–≤–¥–∞–Ω—å
- –ê–¥–º—ñ–Ω–∏ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–ª—è —Å–≤–æ–≥–æ –ü—Ä–æ—Å—Ç–æ—Ä—É
- –ö–æ–∂–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –º–∞—î –Ω–∞–∑–≤—É, —ñ–∫–æ–Ω–∫—É (emoji) —Ç–∞ –∫–æ–ª—ñ—Ä
- –ü–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è + –º–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ

### 2. –ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ –±–∞–ª–∞–º–∏
- –ó–∞–≤–¥–∞–Ω–Ω—è –º–æ–∂—É—Ç—å –º–∞—Ç–∏ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è
- –ö–æ–∂–Ω–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –º–∞—î —Å–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤ –±–∞–ª–∞—Ö (1-100)
- –ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –±–∞–ª–∏ –Ω–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è

### 3. –§–æ—Ç–æ-–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ 3 —Ñ–æ—Ç–æ
- –§–æ—Ç–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Supabase Storage

### 4. –ì–Ω—É—á–∫–∞ —Ä–æ—Ç–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤
- –†–æ—Ç–∞—Ü—ñ—è –≤—ñ–¥ —â–æ—Ö–≤–∏–ª–∏–Ω–∏ –¥–æ —â–æ—Ä–æ–∫—É
- –ú–æ–∂–Ω–∞ –≤—Ä—É—á–Ω—É –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–≤—Ü—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –Ω–æ–≤–∏—Ö –∑–∞–≤–¥–∞–Ω—å

## üìù –Ø–∫ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –≤ –ë–î

### –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç—ñ—Ç—å SQL –º—ñ–≥—Ä–∞—Ü—ñ—é

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ SQL Editor
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–º—ñ—Å—Ç —Ñ–∞–π–ª—É `migrations/001_add_categories_subtasks_photos.sql`
4. –í—Å—Ç–∞–≤—Ç–µ –≤ SQL Editor
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Run"

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Storage –¥–ª—è —Ñ–æ—Ç–æ

1. –í Supabase Dashboard –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Storage
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π bucket –∑ –Ω–∞–∑–≤–æ—é `task-photos`
3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
   - Public: FALSE
   - File size limit: 5MB
   - Allowed mime types: image/jpeg, image/png, image/webp

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

–í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π SQL –∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–≤–∏—Ö —Ç–∞–±–ª–∏—Ü—å
SELECT table_name FROM information_schema.tables
WHERE table_schema = 'public'
AND table_name IN ('task_categories', 'subtasks', 'task_photos');

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
SELECT * FROM task_categories WHERE is_custom = false LIMIT 5;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ –≤ tasks
SELECT column_name FROM information_schema.columns
WHERE table_name = 'tasks'
AND column_name IN ('category_id', 'has_subtasks', 'completed_subtask_ids');
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

### TDD –ø—ñ–¥—Ö—ñ–¥

–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ –∑ Test-Driven Development:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
npm test -- __tests__/hooks/useTaskCategories.test.tsx
npm test -- __tests__/hooks/useSubtasks.test.tsx
npm test -- __tests__/utils/rotation.test.ts
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

1. **–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó**
   - –£–≤—ñ–π–¥—ñ—Ç—å —è–∫ –∞–¥–º—ñ–Ω
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
   - –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–µ—Ä–µ–¥–≤–∏–∑–Ω–∞—á–µ–Ω—É (–º–∞—î –±—É—Ç–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ)
   - –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤–ª–∞—Å–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é

2. **–ü—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è**
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è
   - –î–æ–¥–∞–π—Ç–µ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏–º–∏ –±–∞–ª–∞–º–∏
   - –ü—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –≤–∏–±–µ—Ä—ñ—Ç—å —è–∫—ñ –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω—ñ
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –±–∞–ª—ñ–≤

3. **–†–æ—Ç–∞—Ü—ñ—è**
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è
   - –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Å–ø–∏—Å–æ–∫ –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤
   - –í–∏–±–µ—Ä—ñ—Ç—å —ñ–Ω—Ç–µ—Ä–≤–∞–ª —Ä–æ—Ç–∞—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–≥–æ–¥–∏–Ω–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É –∑–º—ñ–Ω—É –≤–∏–∫–æ–Ω–∞–≤—Ü—è

## üîß –§–∞–π–ª–∏ —è–∫—ñ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ/–∑–º—ñ–Ω–µ–Ω—ñ

### –ù–æ–≤—ñ —Ñ–∞–π–ª–∏:
- `/migrations/001_add_categories_subtasks_photos.sql` - SQL –º—ñ–≥—Ä–∞—Ü—ñ—è
- `/src/hooks/useTaskCategories.ts` - –•—É–∫ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `/src/hooks/useSubtasks.ts` - –•—É–∫ –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
- `/src/utils/rotation.ts` - –õ–æ–≥—ñ–∫–∞ —Ä–æ—Ç–∞—Ü—ñ—ó
- `/__tests__/hooks/useTaskCategories.test.tsx` - –¢–µ—Å—Ç–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `/__tests__/hooks/useSubtasks.test.tsx` - –¢–µ—Å—Ç–∏ –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å
- `/__tests__/utils/rotation.test.ts` - –¢–µ—Å—Ç–∏ –¥–ª—è —Ä–æ—Ç–∞—Ü—ñ—ó

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏:
- `/src/lib/supabase.ts` - –î–æ–¥–∞–Ω—ñ –Ω–æ–≤—ñ TypeScript —Ç–∏–ø–∏
- `/src/hooks/useTasks.ts` - –û–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω—å

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

1. **Backup –ë–î** - –ó—Ä–æ–±—ñ—Ç—å backup –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º—ñ–≥—Ä–∞—Ü—ñ—ó
2. **–¢–µ—Å—Ç–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ** - –°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–∞ dev/staging
3. **RLS –ø–æ–ª—ñ—Ç–∏–∫–∏** - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ –ø–æ–ª—ñ—Ç–∏–∫–∏ –∑–∞—Å—Ç–æ—Å—É–≤–∞–ª–∏—Å—è
4. **Storage CORS** - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ CORS –¥–ª—è Storage —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—é –ë–î
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Storage
3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
4. –°—Ç–≤–æ—Ä—ñ—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥–ª—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
5. –Ü–Ω—Ç–µ–≥—Ä—É–π—Ç–µ –≤ —ñ—Å–Ω—É—é—á—ñ –µ–∫—Ä–∞–Ω–∏

## üí° –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó:
```typescript
const { mutate: createCategory } = useCreateCategory();

createCategory({
  name: '–°–∞–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ',
  icon: 'üå±',
  color: '#22C55E'
});
```

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—ñ–¥–∑–∞–≤–¥–∞–Ω–Ω—è:
```typescript
const { mutate: addSubtask } = useCreateSubtask();

addSubtask({
  taskId: 'task-123',
  title: '–ü–æ–º–∏—Ç–∏ –ø—ñ–¥–ª–æ–≥—É',
  points: 3
});
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ—Ç–∞—Ü—ñ—ó:
```typescript
// –©–æ–¥–µ–Ω–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è –æ 9:00
{
  assignee_rotation: ['member1', 'member2', 'member3'],
  rotation_interval_value: 1,
  rotation_interval_unit: 'day'
}

// –©–æ–≥–æ–¥–∏–Ω–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è
{
  assignee_rotation: ['member1', 'member2'],
  rotation_interval_value: 1,
  rotation_interval_unit: 'hour'
}
```

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏ —è–∫—â–æ —î –ø—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ—Å—Ç—É–ø–æ–º

---

‚úÖ –í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≥–æ—Ç–æ–≤—ñ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –º—ñ–≥—Ä–∞—Ü—ñ—ó!